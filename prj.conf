CONFIG_MAIN_STACK_SIZE=16384
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_PRINTK=y

CONFIG_SPI=y
CONFIG_PWM=y
CONFIG_I2C=y
CONFIG_GPIO=y
CONFIG_RTC=y
CONFIG_RTC_ALARM=y
CONFIG_INPUT=y
CONFIG_EEPROM=y
CONFIG_SERIAL=y
CONFIG_SENSOR=y
CONFIG_DISPLAY=y
CONFIG_CRC=y
CONFIG_FPU=y
CONFIG_CACHE_MANAGEMENT=y
CONFIG_DCACHE=y
CONFIG_ICACHE=y
CONFIG_ARM_MPU=y
CONFIG_HWINFO=y

CONFIG_MODBUS=y
CONFIG_MODBUS_ROLE_CLIENT_SERVER=y

CONFIG_CAN=y
CONFIG_CAN_FD_MODE=y
CONFIG_ISOTP=y
CONFIG_ISOTP_USE_TX_BUF=y
CONFIG_ISOTP_TX_BUF_COUNT=20
CONFIG_ISOTP_BUF_TX_DATA_POOL_SIZE=128
CONFIG_ISOTP_RX_BUF_COUNT=20
CONFIG_ISOTP_RX_BUF_SIZE=128
CONFIG_ISOTP_ENABLE_TX_PADDING=y

CONFIG_FLASH=y
CONFIG_FLASH_MAP=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FILE_SYSTEM=y
CONFIG_FILE_SYSTEM_LITTLEFS=y

# Enable binary descriptors
CONFIG_BINDESC=y
CONFIG_BINDESC_DEFINE=y
CONFIG_BINDESC_DEFINE_BUILD_TIME=y
CONFIG_BINDESC_BUILD_DATE_TIME_STRING=y
CONFIG_BINDESC_DEFINE_VERSION=y
CONFIG_BINDESC_KERNEL_VERSION_STRING=y
CONFIG_BINDESC_KERNEL_VERSION_MAJOR=y
CONFIG_BINDESC_APP_VERSION_STRING=y
CONFIG_BINDESC_APP_VERSION_MAJOR=y
CONFIG_BINDESC_APP_VERSION_MINOR=y
CONFIG_BINDESC_APP_VERSION_PATCHLEVEL=y

# === Enable ext sdram ====
CONFIG_MEMC=y

# === Extern Flash ===
# CONFIG_STM32_MEMMAP=y
# CONFIG_CODE_DATA_RELOCATION=y
# CONFIG_HAVE_CUSTOM_LINKER_SCRIPT=y
# CONFIG_CUSTOM_LINKER_SCRIPT="linker/linker_arm_nocopy.ld"
# CONFIG_XIP=y

# ========== LVGL - Configuração otimizada para memória ===============

CONFIG_LVGL=y

# Configurações de memória baseadas no lv_conf.h
# Usar menos memória na RAM interna - baseado no exemplo que usa 240KB
CONFIG_LV_Z_MEM_POOL_SIZE=3000000
CONFIG_LV_Z_MEMORY_POOL_CUSTOM_SECTION=y

# VDB (Video Display Buffer) configuration - otimizado
CONFIG_LV_Z_VDB_CUSTOM_SECTION=y
CONFIG_LV_Z_DOUBLE_VDB=y
CONFIG_LV_Z_FLUSH_THREAD=y
# CONFIG_LV_Z_VDB_SIZE=64

# Usar buffer de desenho menor - baseado no exemplo
# CONFIG_LV_Z_DRAW_BUF_SIZE=24576

# Habilitar sistema de monitoramento
CONFIG_LV_USE_SYSMON=y

# Configurações de log reduzidas
CONFIG_LV_USE_LOG=y

# Fontes mínimas necessárias
CONFIG_LV_FONT_MONTSERRAT_12=y
CONFIG_LV_FONT_MONTSERRAT_14=y
CONFIG_LV_FONT_MONTSERRAT_16=y

# Widgets essenciais apenas
CONFIG_LV_USE_ARC=y
CONFIG_LV_USE_BAR=y
CONFIG_LV_USE_BUTTON=y
CONFIG_LV_USE_LABEL=y
CONFIG_LV_USE_LED=y
CONFIG_LV_USE_SWITCH=y

# Desabilitar widgets que consomem muita memória
CONFIG_LV_USE_ANIMIMG=y
CONFIG_LV_USE_CANVAS=y
CONFIG_LV_USE_CHART=y
CONFIG_LV_USE_CHECKBOX=y
CONFIG_LV_USE_DROPDOWN=y
CONFIG_LV_USE_LINE=y
CONFIG_LV_USE_SPINBOX=y
CONFIG_LV_USE_SPINNER=y
CONFIG_LV_USE_TABLE=y
CONFIG_LV_USE_TABVIEW=y
CONFIG_LV_USE_TILEVIEW=y
CONFIG_LV_USE_WIN=y

CONFIG_INPUT_QUEUE_MAX_MSGS=1024
# Desabilitar todas as demos inicialmente
CONFIG_LV_USE_DEMO_WIDGETS=y
# CONFIG_LV_USE_DEMO_BENCHMARK=y
# CONFIG_LV_USE_DEMO_STRESS=y
# CONFIG_LV_USE_DROPDOWN=y

# Tema simples apenas
CONFIG_LV_USE_THEME_DEFAULT=y
CONFIG_LV_USE_THEME_SIMPLE=n
CONFIG_LV_USE_THEME_MONO=n

CONFIG_LV_USE_MEM_MONITOR=y
CONFIG_LV_USE_PERF_MONITOR=y
CONFIG_LV_PERF_MONITOR_ALIGN_TOP_RIGHT=y
CONFIG_LV_MEM_MONITOR_ALIGN_BOTTOM_LEFT=y
CONFIG_LV_USE_DRAW_DMA2D=y
CONFIG_LV_ATTRIBUTE_MEM_ALIGN_SIZE=64

# ========== Ethernet - Reduzido ===============

CONFIG_NETWORKING=y
CONFIG_NET_SOCKETS=y
CONFIG_NET_IPV4=y
CONFIG_NET_DHCPV4=y

# Buffers de rede reduzidos para economizar RAM
CONFIG_NET_BUF_RX_COUNT=8
CONFIG_NET_BUF_TX_COUNT=8
CONFIG_NET_PKT_RX_COUNT=8
CONFIG_NET_PKT_TX_COUNT=8

CONFIG_NET_MGMT_EVENT_STACK_SIZE=1024
CONFIG_NET_TCP=y
CONFIG_NET_MGMT=y
CONFIG_NET_MGMT_EVENT=y
CONFIG_NET_LOG=y
CONFIG_ENTROPY_GENERATOR=y
CONFIG_TEST_RANDOM_GENERATOR=y

CONFIG_NET_STATISTICS=y
CONFIG_NET_STATISTICS_USER_API=y

# ========== SD Card ===============

CONFIG_DISK_ACCESS=y
CONFIG_DISK_DRIVERS=y
CONFIG_DISK_DRIVER_SDMMC=y

CONFIG_FILE_SYSTEM=y
CONFIG_FAT_FILESYSTEM_ELM=y

CONFIG_SDMMC_STM32_HWFC=y

# Reduzir heap para economizar RAM
CONFIG_COMMON_LIBC_MALLOC_ARENA_SIZE=4096

# ========== SHELL - Reduzido ===============

CONFIG_SHELL=y
CONFIG_I2C_SHELL=y
CONFIG_RTC_SHELL=y
CONFIG_FILE_SYSTEM_SHELL=y
CONFIG_HEAP_MEM_POOL_SIZE=4096
CONFIG_NET_SHELL=y
CONFIG_LV_Z_SHELL=y

# ==== DEBUG - Reduzido =====

CONFIG_DEBUG=y
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y

# Zephyr RTOS plugin for JlinkGDBserver
CONFIG_DEBUG_THREAD_INFO=y
CONFIG_THREAD_NAME=y
CONFIG_TRACING=y